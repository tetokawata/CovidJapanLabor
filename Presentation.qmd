---
title: "COVID-19下の雇用創出"
subtitle: "[作業レポジトリ](https://github.com/tetokawata/CovidJapanLabor)"
author: "川田恵介"
format:
  revealjs:
    html-math-method: katex
    css: styles.css
    incremental: true
    slide-number: true
execute: 
  warning: false
  message: false
  echo: false
bibliography: "references.bib"
---

## 内容

- 経済・社会ショックの雇用への影響は学術的・政策的関心

- 年末に執筆予定のDiscussion paperの解説を行う

    - [ハローワークデータ](https://www.mhlw.go.jp/toukei/list/114-1b.html)

    - COVID-19が発生しなかった仮想世界との比較
    
    - 地域間Two-Way Fixed Effectとは異なる仮定群の活用 [@menchetti2022]
    
    - 直接観察不可能な厚生指標についても議論 [@kawata2021]

## Job Creation

- 求職者 | 求人 $\rightarrow$ 入職

- 労働市場の循環を維持するためには、 "常に"Job Creationが必要

    - 経済・社会ショックの影響を受けやすい
    
    - Job Destruction, $就業 \rightarrow 非就業$ , はPersistencyが強い
    
    - @fukai2021describing

- National Representativeな"Best Data"は存在しない

    - 個別の市場について、業務データの利用可能性拡大

## パターン

```{r, dev='ragg_png'}
pacman::p_load(tidyverse)

tibble(x = seq(0,1,0.01),
       type = "どんどん悪化"
       ) |> 
  mutate(y = -x^0.5) |> 
  bind_rows(
    tibble(x = seq(0,1,0.01),
       type = "回復"
       ) |> 
      mutate(y = -x + x^(2))
  ) |> 
  bind_rows(
    tibble(x = seq(0,1,0.01),
       type = "取り戻す"
       ) |> 
      mutate(y = -x + 1.1*x^(2))
  ) |> 
  ggplot(aes(x = x,
             y = y,
             color = type)
         ) +
  geom_line() +
  geom_hline(yintercept = 0) +
  theme_bw()
```


## ハローワーク

- 公的職業紹介サービス

- 民間の紹介サービスに比べて、立場の弱い労働者の利用が多い (!?)

- Matching Functionの推定などに利用 [@kano2005]

## 詳細

- 2022年12月までのデータを用いて、結果変数群の時系列予測モデルを構築し、現実と比較

    - 本スライドでは、2022年8月まで

    - 地域間Two-Way Fixed Effectと比べて、 地域間相互影響を許容できる
    
        - COVID-19の影響を受けていないコントロール地域とは?

## 詳細

- Hallow Work as

    - Job Producer: COVID-19により、どの程度新規雇用(及び新規求人・求職者)が変化したのか？
    
    - Surplus Producer: どの程度、求職者（求人者）余剰が変化したのか？

## 「因果効果を」はかる

- （なぜか）あまり強調されない傾向にある No Interference (SUTVA, No general equilibrium effect) の重要性を議論
    
- 観察できる変数への効果は相対的に容易であるが、不十分 (多重検定 VS 不十分な測定)
    
    - 経済モデルによる補完

## 推定戦略: 就職件数

- Key Identification Assumption: Conditional Stationarity

    - COVID-19が発生しなかった場合、 $Y$ の（過去の流列で条件付けた）条件付き分布は、2020以降も変化しない

    - オリンピック、為替変動、金融政策???

- Estimation: Bootstrapによる信頼区間形成が可能

## 暫定結果: 新規就職件数


```{r}
pacman::p_load(CausalArima,
               patchwork,
               tidyverse)

Raw <- readxl::read_excel("Data/HallowFullTime.xlsx")

Dates <- seq.Date(from = as.Date("1995-04-01"),
                  by = "months",
                  length.out = nrow(Raw))


IntDate <- as.Date("2020-01-01")

Start <-as.numeric(strftime(as.Date(Dates[1], "%Y-%m-%d"), "%u"))

Y <- Raw$Hir |> log()

X <- model.matrix(~ factor(Month) + Year,
                  Raw)

X <- X[,-1]

ce <- CausalArima::CausalArima(y = ts(Y, start = Start, frequency = 1), 
                  dates = Dates, 
                  int.date = IntDate,
                  xreg = X, 
                  nboot = 1000)

Fig <- plot(ce,
            type = "impact")

FigCum <- Fig$cumulative_plot

FigTemp <- Fig$plot

Fig <- plot(ce,
            type = "forecast")

FigPred <- Fig

FigPred
```

## 暫定結果: 差

```{r}
FigTemp
```


## 暫定結果: 新規求職・求人件数

```{r}
Raw <- readxl::read_excel("Data/HallowFullTime.xlsx")

Dates <- seq.Date(from = as.Date("1995-04-01"),
                  by = "months",
                  length.out = nrow(Raw))

IntDate <- as.Date("2020-01-01")

Start <-as.numeric(strftime(as.Date(Dates[1], "%Y-%m-%d"), "%u"))

Y <- Raw$NewSeeker |> log()

X <- model.matrix(~ factor(Month) + Year,
                  Raw)

X <- X[,-1]

ce <- CausalArima::CausalArima(y = ts(Y, start = Start, frequency = 1), 
                  dates = Dates, 
                  int.date = IntDate,
                  xreg = X, 
                  nboot = 1000)

Fig <- plot(ce,
            type = "impact")

FigSeeker <- Fig$plot +
  xlab("Seeker") +
  ylim(-0.6,0.4)

Raw <- readxl::read_excel("Data/HallowFullTime.xlsx")

Dates <- seq.Date(from = as.Date("1995-04-01"),
                  by = "months",
                  length.out = nrow(Raw))

IntDate <- as.Date("2020-01-01")

Start <-as.numeric(strftime(as.Date(Dates[1], "%Y-%m-%d"), "%u"))

Y <- Raw$NewVacancy |> log()

X <- model.matrix(~ factor(Month) + Year,
                  Raw)

X <- X[,-1]

ce <- CausalArima::CausalArima(y = ts(Y, start = Start, frequency = 1), 
                  dates = Dates, 
                  int.date = IntDate,
                  xreg = X, 
                  nboot = 1000)

Fig <- plot(ce,
            type = "impact")

FigVacancy <- Fig$plot +
  xlab("Vacancy") +
  ylim(-0.6,0.4)

FigSeeker + FigVacancy
```


## 分解

$$\log(H)=\underbrace{\log(H/V)}_{"Productivity"}+\log(V)$$

- $H:$ 就職件数, $V:$ 求人件数

## 分解

```{r}
Raw <- readxl::read_excel("Data/HallowFullTime.xlsx")

Dates <- seq.Date(from = as.Date("1995-04-01"),
                  by = "months",
                  length.out = nrow(Raw))

IntDate <- as.Date("2020-01-01")

Start <-as.numeric(strftime(as.Date(Dates[1], "%Y-%m-%d"), "%u"))

Y <-  log(Raw$Hir/Raw$Vacancy)

X <- model.matrix(~ factor(Month) + Year,
                  Raw)

X <- X[,-1]

ce <- CausalArima::CausalArima(y = ts(Y, start = Start, frequency = 1), 
                  dates = Dates, 
                  int.date = IntDate,
                  xreg = X, 
                  nboot = 1000)

Fig <- plot(ce,
            type = "impact")

FigProduce <- Fig$plot +
  xlab("Productivity")+
  ylim(-0.6,0.6)


Raw <- readxl::read_excel("Data/HallowFullTime.xlsx")

Dates <- seq.Date(from = as.Date("1995-04-01"),
                  by = "months",
                  length.out = nrow(Raw))

IntDate <- as.Date("2020-01-01")

Start <-as.numeric(strftime(as.Date(Dates[1], "%Y-%m-%d"), "%u"))

Y <-  log(Raw$Vacancy)

X <- model.matrix(~ factor(Month) + Year,
                  Raw)

X <- X[,-1]

ce <- CausalArima::CausalArima(y = ts(Y, start = Start, frequency = 1), 
                  dates = Dates, 
                  int.date = IntDate,
                  xreg = X, 
                  nboot = 1000)

Fig <- plot(ce,
            type = "impact")

FigVacancy <- Fig$plot +
  xlab("Vacancy")+
  ylim(-0.6,0.6)


FigProduce + FigVacancy
```

## 推定戦略: 余剰

- 標準的なサーチモデル (DMPモデル) を利用

- 求職者の余剰: Type $i$ workers, type $j$ jobs

$$\sum_{ij} \underbrace{p_{ij}}_{JobFinding}\times \underbrace{\Delta_{ij}}_{MatchSurplus}$$

## 推定戦略: 余剰

- @kawata2021 : (識別) 非常に一般的な状況で余剰の対数変化は、求人倍率の対数変化と一致する

    - 労働市場外の構造はなんとでも想定できる
    
    - Nonparametricな定式化OK: 効用、利潤、マッチング関数、労働者・求人の観察不可能な属性分布
    
    - 重要な仮定: Observationally equilivarentな求人について、労働分配率・サーチ費用は一定
    
    - JobFinding と MatchSurplusの貢献に分解可能

## 暫定結果: 求職者の平均余剰

```{r}
Y <- log(Raw$Vacancy/Raw$Seeker)

X <- model.matrix(~ factor(Month) + Year,
                  Raw)
X <- X[,-1]

ce <- CausalArima::CausalArima(y = ts(Y, start = Start, frequency = 1), 
                  dates = Dates, 
                  int.date = IntDate,
                  xreg = X, 
                  nboot = 1000)

Fig <- plot(ce,
            type = "impact")

Fig$plot
```


## 暫定結果: 分解

```{r}
Y <- log(Raw$Hir/Raw$Seeker)

X <- model.matrix(~ factor(Month) + Year,
                  Raw)
X <- X[,-1]

ce <- CausalArima::CausalArima(y = ts(Y, start = Start, frequency = 1), 
                  dates = Dates, 
                  int.date = IntDate,
                  xreg = X, 
                  nboot = 1000)

Fig1 <- plot(ce,
            type = "impact")

Y <- log(Raw$Vacancy/Raw$Hir)

ce <- CausalArima::CausalArima(y = ts(Y, start = Start, frequency = 1), 
                  dates = Dates, 
                  int.date = IntDate,
                  xreg = X, 
                  nboot = 1000)

Fig2 <- plot(ce,
            type = "impact")

Fig1 <- Fig1$plot + xlab("Job Finding Rate")

Fig2 <- Fig2$plot + xlab("Matching Surplus")

Fig1 + Fig2
```

## まとめ

- ざっくり"下げ止まり"・緩やかな傾向に留まる

- Job Producerとしては、新規求人の回復しているが、新規就職件数の明確な増加にはつながっていない

    - 直近では求人あたりの生産性が低下している

- Surplus Producerとしては、平均余剰は緩やかに回復しているが、不十分

    - Job Finding Rateが回復していない

## Reference